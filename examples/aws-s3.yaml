# Example: AWS (EKS + S3)

image:
  repository: quay.io/milaboratories/platforma
  pullPolicy: IfNotPresent
  tag: ""

serviceAccount:
  create: true
  annotations:
    eks.amazonaws.com/role-arn: "arn:aws:iam::123456789012:role/MyPlatformaIAMRole"

ingress:
  enabled: true
  className: "nginx"
  host: platforma.example.eks.local
  tls:
    enabled: false

service:
  type: ClusterIP

persistence:
  mainRoot:
    enabled: false
  dbDir:
    enabled: true
    createPvc: true
    accessMode: ReadWriteOnce
    size: 20Gi
    storageClass: "gp3"
    mountPath: /db
  workDir:
    enabled: true
    createPvc: true
    accessMode: ReadWriteOnce
    size: 50Gi
    storageClass: "gp3"
    mountPath: /data/work
  packagesDir:
    enabled: true
    createPvc: true
    accessMode: ReadWriteOnce
    size: 50Gi
    storageClass: "gp3"
    mountPath: /storage/controllers/software-loader

primaryStorage:
  s3:
    enabled: true
    url: "s3://example-platforma-bucket/primary/"
    region: "eu-central-1"
    secretRef:
      enabled: false
  fs:
    enabled: false
  gcs:
    enabled: false
    

dataLibrary:
  s3:
    - id: "library"
      enabled: true
      url: "s3://example-platforma-bucket/corp-library/"
      region: "eu-central-1"
      secretRef:
        enabled: false
    - id: "test-assets"
      enabled: true
      url: "s3://example-platforma-bucket/test-assets/"
      region: "eu-central-1"
      secretRef:
        enabled: false

monitoring:
  enabled: true
  port: 9090

resources:
  requests:
    cpu: 1000m
    memory: 2Gi
  limits:
    cpu: 2000m
    memory: 4Gi


